{% extends "basic.html" %}
{% load static %}

{% block title %}{{ post.title }}{% endblock title %}

{% block meta %}
<!-- SEO Meta Tags -->
<meta name="description" content="{{ post.content|striptags|truncatewords:25 }}">
<meta name="keywords" content="Mak Media Tech, blog, media, advertising, technology">

<!-- Open Graph -->
<meta property="og:title" content="{{ post.title }}">
<meta property="og:description" content="{{ post.content|striptags|truncatewords:30 }}">
{% if post.image %}
<meta property="og:image" content="{{ request.build_absolute_uri }}{{ post.image.url }}">
{% endif %}
<meta property="og:type" content="article">
<meta property="og:url" content="{{ request.build_absolute_uri }}">
{% endblock meta %}

{% block body %}
<div class="container py-5">

    <div class="row justify-content-center">
        <div class="col-lg-9 col-md-12">

            <!-- Blog Header -->
            <h1 class="fw-bold mb-3">{{ post.title }}</h1>
            <p class="text-muted mb-4">
                Published on {{ post.created_at|date:"F d, Y" }}
            </p>

            <!-- Blog Content -->
            <div class="blog-content">

                {% for block in content_blocks %}
                    {% if block.type == "p" %}
                        <p>{{ block.text|safe }}</p>

                    {% elif block.type == "img" %}
                        <figure class="my-4 text-center">
                            <img 
                                src="{{ block.image_url }}" 
                                class="img-fluid rounded"
                                alt="{{ post.title }}"
                            >
                        </figure>
                    {% endif %}
                {% endfor %}

            </div>

            <!-- Social Share -->
            <div class="mt-5 pt-4 border-top">
                <h6 class="fw-bold mb-3">Share this article</h6>
                <div class="d-flex gap-3">

                    <a href="https://wa.me/?text={{ post.title }} {{ request.build_absolute_uri }}" 
                       class="btn btn-success btn-sm" target="_blank">
                        WhatsApp
                    </a>

                    <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}" 
                       class="btn btn-dark btn-sm" target="_blank">
                        X
                    </a>

                    <a href="https://facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" 
                       class="btn btn-primary btn-sm" target="_blank">
                        Facebook
                    </a>

                </div>
            </div>

        </div>
    </div>

</div>
{% endblock body %}

<style>
.blog-content p {
    text-align: justify;
    line-height: 1.8;
    margin-bottom: 1.2rem;
}
</style>
